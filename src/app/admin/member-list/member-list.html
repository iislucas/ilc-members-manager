@if (loading()) {
<div class="spinner"></div>
} @else if (error()) {
<p class="error">Error: {{ error() }}</p>
} @else {
<div class="member-list-header">
  <div class="search-box">
    <app-icon class="search-icon" name="search"></app-icon>
    <input
      type="text"
      placeholder="Search by name or email"
      (input)="onSearch($event)"
    />
  </div>
  <button (click)="onNewMember()">New Member</button>
</div>
<div class="member-cards">
  @for (member of members(); track member.id) {
  <div class="member-card" (click)="selectedMember.set(member)">
    @if(selectedMember() === member) {
    <app-member-edit
      [member]="member"
      [allMembers]="members()"
      (close)="selectedMember.set(null)"
    ></app-member-edit>
    } @else {
    <div class="selectable-member-card">
      <h3>{{ member.public.name }}</h3>
      <p>{{ member.public.email }}</p>
    </div>
    }
  </div>
  }
</div>
}
